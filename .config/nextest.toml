[profile.default]
default-filter = "not test(test_stream_all_messages_does_not_lose_messages)"
retries = 0
status-level = "skip"
failure-output = "final"
fail-fast = false

[profile.ci]
slow-timeout = "90sec"
default-filter = "not (test(test_stream_all_messages_does_not_lose_messages)|test(test_can_stream_group_messages_for_updates))"
retries = 0
status-level = "skip"
failure-output = "immediate-final"
fail-fast = false

[[profile.ci.overrides]]
platform = 'wasm32-unknown-unkown'
slow-timeout = "1m"
# test_db_migrates experiences random failures b/c of 'corrupted double-linked list' coming from glibc/sqlcipher https://github.com/xmtp/libxmtp/issues/2402
[[profile.ci.overrides]]
filter = 'test(/\btest_db_migrates/)'
retries = 3

[[profile.ci.overrides]]
filter = 'test(/\btest_can_stream_group_messages_for_updates/)'
retries = 3

[profile.ci-d14n]
default-filter = "not (test(/\\w*commit_log*/)|test(case_2_onehundred_dms)|test(rapidfire_duplicate_create)|test(test_can_sync_all_groups)|test(test_static_revoke_fails_with_non_recovery_identity)|test(test_stream_consent)|test(test_sync_100_allowed_groups_performance)|test(test_stream_all_dm_messages))"
status-level = "skip"
failure-output = "immediate-final"
fail-fast = false
retries = 3
