#!/bin/bash
set -euo pipefail

NETWORK_NAME="libxmtp-backend"

# Create network if missing (idempotent)
if ! docker network inspect "$NETWORK_NAME" >/dev/null 2>&1; then
  docker network create "$NETWORK_NAME" --label proxynet >/dev/null
fi

docker compose \
  -f dev/docker/docker-compose.yml \
  -f dev/docker/docker-compose-d14n.yml \
  --env-file dev/docker/local.env \
  -p "libxmtp" \
  "$@"
